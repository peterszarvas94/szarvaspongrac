---
import BaseLayout from "./BaseLayout.astro";
import Footer from "@components/Footer.astro";
import ImageGallery from "@components/ImageGallery.astro";
import PageTitle from "@components/PageTitle.astro";
import ImageUpload from "@components/ImageUpload.astro";
import ImagePopover from "@components/ImagePopover.astro";
import EditButton from "@components/EditButton.astro";
import CancelButton from "@components/CancelButton.astro";
import GalleryFooter from "@components/GalleryFooter.astro";

export interface Props {
  title: string;
  description: string;
  pageTitle: string;
  key: string;
  backHref?: string;
  backText?: string;
}

const {
  title,
  description,
  pageTitle,
  key,
  backHref = "/kepzomuveszet",
  backText = "Vissza a Képzőművészethez",
} = Astro.props;
---

<BaseLayout
  title={title}
  description={description}
  mainClass="py-4"
>
  <PageTitle title={pageTitle} />

  <!-- Gallery Content -->
  <div
    class="flex flex-col items-center gap-8 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"
  >
    <div
      data-auth="true"
      class="hidden w-full flex justify-center gap-2"
    >
      <EditButton />
      <CancelButton cancelText="Kilépés" />
    </div>

    <ImageUpload key={key} />

    <ImagePopover />

    <ImageGallery key={key} />
  </div>

  <GalleryFooter
    slot="footer"
    backHref={backHref}
    backText={backText}
  />
</BaseLayout>

<script>
  import "@scripts/gallery";
</script>
