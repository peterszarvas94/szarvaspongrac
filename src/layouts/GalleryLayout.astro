---
import BaseLayout from "./BaseLayout.astro";
import Footer from "@components/Footer.astro";
import ImageGallery from "@components/ImageGallery.astro";
import PageTitle from "@components/PageTitle.astro";
import ImageUpload from "@components/ImageUpload.astro";
import ImagePopover from "@components/ImagePopover.astro";
import EditButton from "@components/EditButton.astro";
import CancelButton from "@components/CancelButton.astro";

export interface Props {
  title: string;
  description: string;
  pageTitle: string;
  key: string;
  backHref?: string;
  backText?: string;
}

const {
  title,
  description,
  pageTitle,
  key,
  backHref = "/kepzomuveszet",
  backText = "Vissza a Képzőművészethez",
} = Astro.props;
---

<BaseLayout
  title={title}
  description={description}
  mainClass="py-4"
>
  <PageTitle title={pageTitle} />

  <!-- Gallery Content -->
  <div
    class="flex flex-col items-center gap-8 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"
  >
    <div
      data-auth="true"
      class="w-full flex justify-center gap-2"
    >
      <EditButton />
      <CancelButton cancelText="Kilépés" />
    </div>

    <ImageUpload key={key} />

    <ImagePopover />

    <ImageGallery key={key} />

    <a
      href={backHref}
      class="flex w-fit justify-center items-center px-6 py-3 bg-base-content text-base-100 font-medium rounded-lg hover:bg-base-content/70 transition-colors duration-200"
    >
      <svg
        class="w-5 h-5 mr-2"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M10 19l-7-7m0 0l7-7m-7 7h18"
        ></path>
      </svg>
      {backText}
    </a>
  </div>

  <Footer slot="footer" />
</BaseLayout>

<script>
  import "@scripts/gallery";
</script>
